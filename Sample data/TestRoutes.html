<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>API Tester — Routes & Sample Bodies</title>
 <style>
  :root {
    --bg: #0f1724;
    --card: #0b1220;
    --muted: #9aa6b2;
    --accent: #60a5fa;
    --white: #e6eef6;
    --panel: #071022;
    --border: rgba(255, 255, 255, 0.04);
  }

  html,
  body {
    height: 100%;
    margin: 0;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  body {
    background: linear-gradient(180deg, #071226 0%, #07102a 100%);
    color: var(--white);
    padding: 20px;
  }

  .wrap {
    display: grid;
    grid-template-columns: 1fr 480px;
    gap: 20px;
    max-width: 1300px;
    margin: 0 auto;
    height: calc(100vh - 40px);
  }

  .panel {
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
    border: 1px solid var(--border);
    padding: 18px;
    border-radius: 12px;
    overflow: auto;
  }

  h2 {
    margin: 0 0 12px 0;
    font-size: 16px;
    color: var(--accent);
  }

  pre.routes {
    white-space: pre-wrap;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
    font-size: 13px;
    line-height: 1.45;
    color: var(--muted);
    background: transparent;
    border: none;
    margin: 0;
  }

  .controls {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  label {
    font-size: 12px;
    color: var(--muted);
    display: block;
    margin-bottom: 6px;
  }

  input[type="text"],
  select,
  textarea {
    width: 90%;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid var(--border);
    background-color: rgba(255, 255, 255, 0.05);
    color: var(--white);
    font-size: 13px;
    outline: none;
  }

  /* ✅ Fix dropdown visibility */
  select {
    background-color: var(--card);
    color: var(--white);
  }

  option {
    background-color: #ffffff;
    color: #000000;
  }

  textarea {
    min-height: 160px;
    resize: vertical;
    font-family: ui-monospace, monospace;
  }

  .row {
    display: flex;
    gap: 12px;
  }

  button {
    background: linear-gradient(90deg, var(--accent), #3b82f6);
    border: none;
    color: #06202a;
    padding: 10px 14px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
  }

  .btn-plain {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--muted);
  }

  .meta {
    display: flex;
    gap: 8px;
    align-items: center;
    font-size: 13px;
    color: var(--muted);
  }

  .response {
    background: #021122;
    border: 1px solid rgba(255, 255, 255, 0.03);
    padding: 12px;
    border-radius: 10px;
    color: var(--muted);
    font-family: ui-monospace, monospace;
    font-size: 13px;
    white-space: pre-wrap;
    overflow: auto;
    max-height: 260px;
  }

  .small {
    font-size: 12px;
    color: var(--muted);
  }

  .top-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
  }

  .footer-note {
    font-size: 12px;
    color: var(--muted);
    margin-top: 8px;
  }

  @media (max-width: 1000px) {
    .wrap {
      grid-template-columns: 1fr;
    }
  }
</style>

</head>
<body>
  <div class="wrap">
    <!-- LEFT: Routes doc (unchanged content) -->
    <div class="panel" id="routesPanel">
      <div class="top-row">
        <h2>API Routes & Sample Bodies</h2>
        <div class="meta">Base: <strong style="color:var(--white)">http://localhost:8080</strong></div>
      </div>

      <pre class="routes">
───────────────────────────────────────────────
User Routes :
───────────────────────────────────────────────

GET    http://localhost:8080/api/users/  
       -- Get all users

GET    http://localhost:8080/api/users/68ea124f86012f2d8b658ce9  
       -- Get user by ID

GET    http://localhost:8080/api/users/role/admin  
       -- Get users by role

POST   http://localhost:8080/api/users/  
       -- Create user with any role  
Body:
{
  "name": "Manager",
  "email": "Manager@example.com",
  "password": "Password123!",
  "role": "manager"
}

PUT   http://localhost:8080/api/users/68ea2c7d453989e32b83c9d1 
      --- Update user and hash the password


DELETE  http://localhost:8080/api/users/68ea0d9378271c82f4665d15 
        --- Delete user by ID

        
───────────────────────────────────────────────
Packages Routes :
───────────────────────────────────────────────

GET    http://localhost:8080/api/packages  
       -- Get all packages

GET    http://localhost:8080/api/packages/68ea0d9378271c82f4665d22  
       -- Get package by ID

POST   http://localhost:8080/api/packages/  
       -- Create a new package  
Body:
{
  "title": "Adventure Package",
  "slug": "adventure-package",
  "description": "Experience the thrill with our Adventure Package including trekking, rafting, and camping.",
  "price": 299,
  "duration": "7 Days / 6 Nights",
  "location": "Himachal Pradesh, India",
  "images": [
    "https://example.com/images/adventure1.jpg",
    "https://example.com/images/adventure2.jpg"
  ],
  "highlights": [
    "Trekking in mountains",
    "River rafting experience",
    "Night camping under stars"
  ],
  "inclusions": [
    "Accommodation",
    "Meals",
    "Transport to all activities"
  ],
  "exclusions": [
    "Personal expenses",
    "Travel insurance",
    "Flight tickets"
  ],
  "isActive": true
}

PUT    http://localhost:8080/api/packages/68ea25b3cce8001f14be7cc5  
       -- Update a package by ID  
Body:
{
  "title": "VIP Package",
  "slug": "adventure-package",
  "description": "Experience the thrill with our Adventure Package including trekking, rafting, and camping.",
  "price": 299,
  "duration": "7 Days / 6 Nights",
  "location": "Himachal Pradesh, India",
  "images": [
    "https://example.com/images/adventure1.jpg",
    "https://example.com/images/adventure2.jpg"
  ],
  "highlights": [
    "Trekking in mountains",
    "River rafting experience",
    "Night camping under stars"
  ],
  "inclusions": [
    "Accommodation",
    "Meals",
    "Transport to all activities"
  ],
  "exclusions": [
    "Personal expenses",
    "Travel insurance",
    "Flight tickets"
  ],
  "isActive": true
}

DELETE http://localhost:8080/api/packages/68ea25b3cce8001f14be7cc5  
       -- Delete an existing package


───────────────────────────────────────────────
Auth Routes :
───────────────────────────────────────────────

POST   http://localhost:8080/api/users/  
       -- Register a new user and set token in cookies  
Body:
{
  "name": "Manager",
  "email": "Manager@example.com",
  "password": "Password123!",
  "role": "manager"
}

POST   http://localhost:8080/api/auth/login  
       -- Authenticate user and then set token in cookies  
Body:
{
  "email": "joshh@example.com",
  "password": "Password123!"
}

POST   http://localhost:8080/api/auth/logout  
       -- Logout user and clear token

GET    http://localhost:8080/api/auth/me  
       -- Get current logged-in user


───────────────────────────────────────────────
Blogs Routes :
───────────────────────────────────────────────

GET    http://localhost:8080/api/blogs  
       -- Get all blogs (default)

GET    http://localhost:8080/api/blogs?page=2&limit=5  
       -- Get blogs with pagination

GET    http://localhost:8080/api/blogs?search=career  
       -- Search blogs by title

GET    http://localhost:8080/api/blogs?search=career&page=2&limit=5  
       -- Combine search + pagination

GET    http://localhost:8080/api/blogs/68ea34d42e8a0d0d6e9f66d3  
       -- Get blog by ID

GET    http://localhost:8080/api/blogs/slug/top-10-programming-languages-to-learn  
       -- Get blog by slug

POST   http://localhost:8080/api/blogs/  
       -- Create new blog  
Body:
{
  "title": "Mastering JavaScript in 2025",
  "slug": "mastering-javascript-in-2025",
  "content": "This blog provides a comprehensive guide to mastering JavaScript, including new ES2025 features, frameworks, and best practices.",
  "author": "68ea2c7d453989e32b83c9d1",
  "thumbnail": "https://example.com/images/js-blog.jpg",
  "tags": ["javascript", "programming", "web development"],
  "published": true,
  "publishedAt": "2025-10-11T10:00:00Z"
}

PUT    http://localhost:8080/api/blogs/68ea360722fa743842150b40  
       -- Update a blog by ID

DELETE http://localhost:8080/api/blogs/68ea360722fa743842150b40  
       -- Delete blog by ID


───────────────────────────────────────────────
Coupons Routes :
───────────────────────────────────────────────

GET    http://localhost:8080/api/coupons  
       -- Get all coupons

GET    http://localhost:8080/api/coupons/68ea0d9378271c82f4665d1e  
       -- Get coupon by ID

POST   http://localhost:8080/api/coupons/  
       -- Create a new coupon  
Body:
{
  "code": "WELCOME50",
  "discountType": "percentage",
  "discountValue": 50,
  "minPurchase": 500,
  "expiryDate": "2025-12-31T23:59:59Z",
  "isActive": true,
  "usageCount": 0,
  "maxUsage": 100
}

PUT    http://localhost:8080/api/coupons/68ea386822fa743842150b47  
       -- Update a coupon by ID

DELETE http://localhost:8080/api/coupons/68ea386822fa743842150b47  
       -- Delete coupon by ID


───────────────────────────────────────────────
Testimonials Routes :
───────────────────────────────────────────────

GET    http://localhost:8080/api/testimonials  
       -- Get all testimonials

GET    http://localhost:8080/api/testimonials/68ea0d9378271c82f4665d17  
       -- Get testimonial by ID

POST   http://localhost:8080/api/testimonials/  
       -- Create new testimonial  
Body:
{
  "name": "Aarav Mehta",
  "message": "The travel experience was absolutely amazing! The team was professional, friendly, and made everything smooth and enjoyable. Highly recommended!",
  "rating": 5,
  "image": "https://example.com/images/aarav-mehta.jpg",
  "position": "Traveler",
  "isVisible": true
}

PUT    http://localhost:8080/api/testimonials/68ea3cd122fa743842150b4e  
       -- Update testimonial by ID

DELETE http://localhost:8080/api/testimonials/68ea3cd122fa743842150b4e  
       -- Delete testimonial by ID


───────────────────────────────────────────────
Leads Routes :
───────────────────────────────────────────────

GET    http://localhost:8080/api/leads  
       -- Get all leads

GET    http://localhost:8080/api/leads/68ea0d9378271c82f4665d1a  
       -- Get lead by ID

POST   http://localhost:8080/api/leads/  
       -- Create a new lead  
Body:
{
  "name": "Rohit Kumar",
  "email": "rohit.kumar@example.com",
  "phone": "+919876543210",
  "message": "I'm interested in your digital marketing services. Please contact me with more details.",
  "source": "Google Ads",
  "status": "new"
}

PUT    http://localhost:8080/api/leads/68ea3fd022fa743842150b55  
       -- Update lead by ID

DELETE http://localhost:8080/api/leads/68ea404422fa743842150b58  
       -- Delete lead by ID
      </pre>
    </div>

    <!-- RIGHT: Interactive tester -->
    <div class="panel" id="testerPanel">
      <div class="top-row">
        <h2>Interactive Request Builder</h2>
        <div class="meta small">Use the dropdown to choose a route — edits are allowed before sending.</div>
      </div>

      <div class="controls">
        <label for="routeSelect">Choose request</label>
        <select id="routeSelect">
          <!-- User Routes -->
          <option value="GET|http://localhost:8080/api/users/">GET — /api/users/</option>
          <option value="GET|http://localhost:8080/api/users/68ea124f86012f2d8b658ce9">GET — /api/users/:id</option>
          <option value="GET|http://localhost:8080/api/users/role/admin">GET — /api/users/role/admin</option>
          <option value="POST|http://localhost:8080/api/users/">POST — Create user</option>
          <option value="PUT|http://localhost:8080/api/users/68ea2c7d453989e32b83c9d1">PUT — Update user (hash password)</option>
          <option value="DELETE|http://localhost:8080/api/users/68ea0d9378271c82f4665d15">DELETE — Delete user</option>

          <!-- Packages -->
          <option value="GET|http://localhost:8080/api/packages">GET — /api/packages</option>
          <option value="GET|http://localhost:8080/api/packages/68ea0d9378271c82f4665d22">GET — /api/packages/:id</option>
          <option value="POST|http://localhost:8080/api/packages/">POST — Create package</option>
          <option value="PUT|http://localhost:8080/api/packages/68ea25b3cce8001f14be7cc5">PUT — Update package</option>
          <option value="DELETE|http://localhost:8080/api/packages/68ea25b3cce8001f14be7cc5">DELETE — Delete package</option>

          <!-- Auth -->
          <option value="POST|http://localhost:8080/api/users/">POST — Register user (sets cookie)</option>
          <option value="POST|http://localhost:8080/api/auth/login">POST — Login (sets cookie)</option>
          <option value="POST|http://localhost:8080/api/auth/logout">POST — Logout</option>
          <option value="GET|http://localhost:8080/api/auth/me">GET — Current user</option>

          <!-- Blogs -->
          <option value="GET|http://localhost:8080/api/blogs">GET — /api/blogs</option>
          <option value="GET|http://localhost:8080/api/blogs?page=2&limit=5">GET — /api/blogs?page=2&limit=5</option>
          <option value="GET|http://localhost:8080/api/blogs?search=career">GET — Search blogs</option>
          <option value="GET|http://localhost:8080/api/blogs?search=career&page=2&limit=5">GET — Search + pagination</option>
          <option value="GET|http://localhost:8080/api/blogs/68ea34d42e8a0d0d6e9f66d3">GET — Blog by ID</option>
          <option value="GET|http://localhost:8080/api/blogs/slug/top-10-programming-languages-to-learn">GET — Blog by slug</option>
          <option value="POST|http://localhost:8080/api/blogs/">POST — Create blog</option>
          <option value="PUT|http://localhost:8080/api/blogs/68ea360722fa743842150b40">PUT — Update blog</option>
          <option value="DELETE|http://localhost:8080/api/blogs/68ea360722fa743842150b40">DELETE — Delete blog</option>

          <!-- Coupons -->
          <option value="GET|http://localhost:8080/api/coupons">GET — /api/coupons</option>
          <option value="GET|http://localhost:8080/api/coupons/68ea0d9378271c82f4665d1e">GET — Coupon by ID</option>
          <option value="POST|http://localhost:8080/api/coupons/">POST — Create coupon</option>
          <option value="PUT|http://localhost:8080/api/coupons/68ea386822fa743842150b47">PUT — Update coupon</option>
          <option value="DELETE|http://localhost:8080/api/coupons/68ea386822fa743842150b47">DELETE — Delete coupon</option>

          <!-- Testimonials -->
          <option value="GET|http://localhost:8080/api/testimonials">GET — /api/testimonials</option>
          <option value="GET|http://localhost:8080/api/testimonials/68ea0d9378271c82f4665d17">GET — Testimonial by ID</option>
          <option value="POST|http://localhost:8080/api/testimonials/">POST — Create testimonial</option>
          <option value="PUT|http://localhost:8080/api/testimonials/68ea3cd122fa743842150b4e">PUT — Update testimonial</option>
          <option value="DELETE|http://localhost:8080/api/testimonials/68ea3cd122fa743842150b4e">DELETE — Delete testimonial</option>

          <!-- Leads -->
          <option value="GET|http://localhost:8080/api/leads">GET — /api/leads</option>
          <option value="GET|http://localhost:8080/api/leads/68ea0d9378271c82f4665d1a">GET — Lead by ID</option>
          <option value="POST|http://localhost:8080/api/leads/">POST — Create lead</option>
          <option value="PUT|http://localhost:8080/api/leads/68ea3fd022fa743842150b55">PUT — Update lead</option>
          <option value="DELETE|http://localhost:8080/api/leads/68ea404422fa743842150b58">DELETE — Delete lead</option>
        </select>

        <div class="row">
          <div style="flex:1">
            <label for="method">Method</label>
            <input id="method" type="text" readonly />
          </div>
          <div style="flex:2">
            <label for="url">URL</label>
            <input id="url" type="text" />
          </div>
        </div>

        <div>
          <label for="body">Request Body (JSON) — edit before sending</label>
          <textarea id="body" placeholder='{"key":"value"}'></textarea>
        </div>

        <div class="row">
          <button id="sendBtn">Send Request</button>
          <button id="clearBtn" class="btn-plain">Clear Response</button>
        </div>

        <div>
          <label>Response</label>
          <div id="responseBox" class="response">No response yet.</div>
          <div class="footer-note">Response status and body appear above. Cookies will be sent if they exist for the domain (credentials: include).</div>
        </div>

      </div>
    </div>
  </div>

  <script>
    // Sample bodies (exact ones from the documentation)
    const sampleBodies = {
      "POST|http://localhost:8080/api/users/": JSON.stringify({
        "name":"Manager",
        "email":"Manager@example.com",
        "password":"Password123!",
        "role":"manager"
      }, null, 2),

      "POST|http://localhost:8080/api/packages/": JSON.stringify({
        "title":"Adventure Package",
        "slug":"adventure-package",
        "description":"Experience the thrill with our Adventure Package including trekking, rafting, and camping.",
        "price":299,
        "duration":"7 Days / 6 Nights",
        "location":"Himachal Pradesh, India",
        "images":["https://example.com/images/adventure1.jpg","https://example.com/images/adventure2.jpg"],
        "highlights":["Trekking in mountains","River rafting experience","Night camping under stars"],
        "inclusions":["Accommodation","Meals","Transport to all activities"],
        "exclusions":["Personal expenses","Travel insurance","Flight tickets"],
        "isActive": true
      }, null, 2),

      "POST|http://localhost:8080/api/blogs/": JSON.stringify({
        "title":"Mastering JavaScript in 2025",
        "slug":"mastering-javascript-in-2025",
        "content":"This blog provides a comprehensive guide to mastering JavaScript, including new ES2025 features, frameworks, and best practices.",
        "author":"68ea2c7d453989e32b83c9d1",
        "thumbnail":"https://example.com/images/js-blog.jpg",
        "tags":["javascript","programming","web development"],
        "published": true,
        "publishedAt":"2025-10-11T10:00:00Z"
      }, null, 2),

      "POST|http://localhost:8080/api/coupons/": JSON.stringify({
        "code":"WELCOME50",
        "discountType":"percentage",
        "discountValue":50,
        "minPurchase":500,
        "expiryDate":"2025-12-31T23:59:59Z",
        "isActive":true,
        "usageCount":0,
        "maxUsage":100
      }, null, 2),

      "POST|http://localhost:8080/api/testimonials/": JSON.stringify({
        "name":"Aarav Mehta",
        "message":"The travel experience was absolutely amazing! The team was professional, friendly, and made everything smooth and enjoyable. Highly recommended!",
        "rating":5,
        "image":"https://example.com/images/aarav-mehta.jpg",
        "position":"Traveler",
        "isVisible": true
      }, null, 2),

      "POST|http://localhost:8080/api/leads/": JSON.stringify({
        "name":"Rohit Kumar",
        "email":"rohit.kumar@example.com",
        "phone":"+919876543210",
        "message":"I'm interested in your digital marketing services. Please contact me with more details.",
        "source":"Google Ads",
        "status":"new"
      }, null, 2),

      // Login body
      "POST|http://localhost:8080/api/auth/login": JSON.stringify({
        "email":"joshh@example.com",
        "password":"Password123!"
      }, null, 2),

      // default empty
      "default": ""
    };

    const select = document.getElementById('routeSelect');
    const methodInput = document.getElementById('method');
    const urlInput = document.getElementById('url');
    const bodyArea = document.getElementById('body');
    const sendBtn = document.getElementById('sendBtn');
    const respBox = document.getElementById('responseBox');
    const clearBtn = document.getElementById('clearBtn');

    function updateFromSelect(){
      const val = select.value;
      const [method, url] = val.split('|');
      methodInput.value = method;
      urlInput.value = url;
      const sample = sampleBodies[val] ?? sampleBodies["default"];
      bodyArea.value = sample;
      // For GET/DELETE, disable body editing
      if(method === 'GET' || method === 'DELETE'){
        bodyArea.setAttribute('readonly', 'true');
        bodyArea.style.opacity = 0.7;
      } else {
        bodyArea.removeAttribute('readonly');
        bodyArea.style.opacity = 1;
      }
    }

    select.addEventListener('change', updateFromSelect);
    // init
    updateFromSelect();

    clearBtn.addEventListener('click', () => {
      respBox.textContent = "No response yet.";
    });

    sendBtn.addEventListener('click', async () => {
      const method = methodInput.value.trim().toUpperCase();
      const url = urlInput.value.trim();
      let body = bodyArea.value.trim();

      // Validate URL
      if(!url){
        respBox.textContent = "Please provide a URL.";
        return;
      }

      // Prepare fetch options
      const options = {
        method,
        headers: {},
        credentials: 'include' // include cookies (important for auth)
      };

      // Add JSON body for POST/PUT/PATCH
      if(method === 'POST' || method === 'PUT' || method === 'PATCH'){
        try {
          // allow empty body
          if(body){
            options.body = body;
            options.headers['Content-Type'] = 'application/json';
          } else {
            options.body = null;
          }
        } catch (e){
          respBox.textContent = "Invalid JSON body. Fix it before sending.\n\n" + e.message;
          return;
        }
      }

      respBox.textContent = "Sending request...";

      try {
        const res = await fetch(url, options);
        const contentType = res.headers.get('content-type') || '';
        let dataText;

        if (contentType.includes('application/json')) {
          const json = await res.json();
          dataText = JSON.stringify(json, null, 2);
        } else {
          dataText = await res.text();
        }

        respBox.textContent = `Status: ${res.status} ${res.statusText}\n\nHeaders:\n${[...res.headers.entries()].map(h=>h.join(': ')).join('\n')}\n\nBody:\n${dataText}`;
      } catch (err) {
        respBox.textContent = `Network or CORS error:\n${err.message}\n\nMake sure your API server is running at the specified URL and CORS allows requests from this origin.`;
      }
    });

    // Allow hitting Enter (Ctrl+Enter) in body to send
    bodyArea.addEventListener('keydown', (e) => {
      if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
        sendBtn.click();
      }
    });

  </script>
</body>
</html>
